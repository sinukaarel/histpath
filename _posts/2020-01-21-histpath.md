---
toc: false
layout: post
description: "Classify and detect cells in testis histopathology images"
categories: [histopathology]
title: "Cell detection and classification"
---

# Cell detection and classification

## Task

Physicians can identify men’s infertility by counting specific cells in testis histopathology images. Such annotation is hard manual labor that can be automated using neural networks. Ida-Tallinn hospital provided a large dataset of these images to build a cell detector and classifier to ease specialists’ lives.

## Data and MIRAX format

Data comes in MIRAX format - a special kind of virtual slide format. Virtual slide is a high-resolution digital image of the microscopy sample that is created by sliding the glass past the camera and taking multiple pictures.

These created images are too high-resolution to practically handle as image tiles and are broken up into multiple files. This kind of processing needs special notation and a system in order to view and access data after storage.

On disk the format includes:

- `.mrxs` file that holds the **metadata** including information on how `.dat` files are organized
- data folder with `.dat` files that hold the actual **image data**
- `Index.dat` file in data folder that holds the **pointers** to locate the image data
- `.json` **annotation** file in JSON format that holds the metadata for the annotated section of the image
- `Slidedat.ini` file in data folder that contains structural data and **parameters of the scanning process** in `key=value` format. These values are also used in order to receive image data.

          TODO:
          - image thumbnails
          - image parameters (size, etc)
          - annotations and overview

## Downscaling images

As the whole-slide images are too big to process it is required to downscale the whole image into smaller tiles.

Resources:

- Downscaling whole-slide images in Python [link](https://developer.ibm.com/technologies/data-science/articles/an-automatic-method-to-identify-tissues-from-big-whole-slide-images-pt1/)
- Use tiling and generate smaller images where the sample occupying atleast 90% of the area [link](https://web.stanford.edu/group/rubinlab/pubs/2243353.pdf)
- Deephistopath [link](https://github.com/CODAIT/deep-histopath)
